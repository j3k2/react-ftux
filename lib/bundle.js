'use strict';Object.defineProperty(exports,'__esModule',{value:!0});function _interopDefault(a){return a&&'object'==typeof a&&'default'in a?a['default']:a}var ee=_interopDefault(require('wolfy87-eventemitter')),React=require('react'),React__default=_interopDefault(React),ReactDOM=_interopDefault(require('react-dom')),styled=require('styled-components'),styled__default=_interopDefault(styled);function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function');a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return a}function _possibleConstructorReturn(a,b){return b&&('object'==typeof b||'function'==typeof b)?b:_assertThisInitialized(a)}function _taggedTemplateLiteral(a,b){return b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}var events={FTUX_ACTION_END:'ftuxActionEnd',FTUX_ACTION_INCREASE:'ftuxActionIncrease',FTUX_ACTION_DECREASE:'ftuxActionDecrease',FTUX_UPDATER:'ftuxUpdater'},eventEmitter=new ee,ftuxStore={},ReactFtux=/*#__PURE__*/function(a){function b(a){var c;return _classCallCheck(this,b),c=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,a)),c.state={},c.increaseStep=function(){var a=ftuxStore.currentStep+1;ftuxStore.currentStep=a,eventEmitter.trigger(events.FTUX_UPDATER,[ftuxStore])},c.decreaseStep=function(){var a=0<ftuxStore.currentStep-1?ftuxStore.currentStep-1:0;ftuxStore.currentStep=a,eventEmitter.trigger(events.FTUX_UPDATER,[ftuxStore])},c.keydownHandler=function(a){'ArrowLeft'===a.key&&c.decreaseStep(),('ArrowRight'===a.key||'Enter'===a.key)&&(ftuxStore.currentStep<c.props.total-1?c.increaseStep():eventEmitter.trigger(events.FTUX_ACTION_END)),'Escape'===a.key&&eventEmitter.trigger(events.FTUX_ACTION_END)},c.init=function(){ftuxStore.ftuxProps=c.props,ftuxStore.currentStep=0,eventEmitter.trigger(events.FTUX_UPDATER,[ftuxStore]),c.props.tooltipSettings&&c.props.tooltipSettings.disableKeydownListener||window.addEventListener('keydown',c.keydownHandler)},c}return _inherits(b,a),_createClass(b,[{key:'componentDidMount',value:function(){var a=this;eventEmitter.on(events.FTUX_ACTION_INCREASE,function(){a.increaseStep()}),eventEmitter.on(events.FTUX_ACTION_DECREASE,function(){a.decreaseStep()}),eventEmitter.on(events.FTUX_ACTION_END,function(){a.props.ftuxEnd&&a.props.ftuxEnd(),a.props.tooltipSettings&&a.props.tooltipSettings.disableKeydownListener||window.removeEventListener('keydown',a.keydownHandler)}),eventEmitter.on(events.FTUX_UPDATER,function(b){a.setState(b)}),this.props.disable||this.init()}},{key:'componentWillUnmount',value:function(){eventEmitter.off(events.FTUX_ACTION_INCREASE),eventEmitter.off(events.FTUX_ACTION_DECREASE),eventEmitter.off(events.FTUX_ACTION_END),eventEmitter.off(events.FTUX_UPDATER)}},{key:'render',value:function(){return React__default.createElement('div',null)}}]),b}(React.Component);//Action events:
function _templateObject9(){var a=_taggedTemplateLiteral(['\n  animation: ',' ',' ease-in;\n']);return _templateObject9=function(){return a},a}function _templateObject8(){var a=_taggedTemplateLiteral(['\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n']);return _templateObject8=function(){return a},a}function _templateObject7(){var a=_taggedTemplateLiteral(['\n  border-top: 8px solid transparent; \n  border-bottom: 8px solid transparent;\n  border-left: 16px solid ',';  \n  right: -16px;\n']);return _templateObject7=function(){return a},a}function _templateObject6(){var a=_taggedTemplateLiteral(['\n  border-top: 8px solid transparent; \n  border-bottom: 8px solid transparent;\n  border-right: 16px solid ','; \n  left: -16px;\n']);return _templateObject6=function(){return a},a}function _templateObject5(){var a=_taggedTemplateLiteral(['\n  border-left: 8px solid transparent; \n  border-right: 8px solid transparent; \n  border-top: 16px solid ',';\n  top: 100%;\n']);return _templateObject5=function(){return a},a}function _templateObject4(){var a=_taggedTemplateLiteral(['\n  border-left: 8px solid transparent;\n  border-right: 8px solid transparent;\n  border-bottom: 16px solid ',';\n  top: -16px;\n']);return _templateObject4=function(){return a},a}function _templateObject3(){var a=_taggedTemplateLiteral(['\n  width: 0px;\n  height: 0px;\n  position: absolute;\n']);return _templateObject3=function(){return a},a}function _templateObject2(){var a=_taggedTemplateLiteral(['\n  margin: 4px;\n  width: 64px;\n  height: 32px;\n  background-color: ',';\n  border: solid 1px ',';\n  border-radius: 5px;\n  color: ',';\n  :hover{\n    cursor: pointer;\n    color: ',';\n    border-color: ',';\n  }\n']);return _templateObject2=function(){return a},a}function _templateObject(){var a=_taggedTemplateLiteral(['\n  :hover{\n    cursor: pointer;\n    color: ',';\n  }\n']);return _templateObject=function(){return a},a}var StyledAnchor=styled__default.span(_templateObject(),function(a){return a.highlightColor||'grey'}),StyledButton=styled__default.button(_templateObject2(),function(a){return a.backgroundColor||'black'},function(a){return a.foregroundColor||'white'},function(a){return a.foregroundColor||'white'},function(a){return a.highlightColor||'grey'},function(a){return a.highlightColor||'grey'}),PointerBase=styled__default.div(_templateObject3()),PointerAbove=PointerBase.extend(_templateObject4(),function(a){return a.backgroundColor||'black'}),PointerBelow=PointerBase.extend(_templateObject5(),function(a){return a.backgroundColor||'black'}),PointerLeft=PointerBase.extend(_templateObject6(),function(a){return a.backgroundColor||'black'}),PointerRight=PointerBase.extend(_templateObject7(),function(a){return a.backgroundColor||'black'}),opacityAnimation=styled.keyframes(_templateObject8()),TooltipBody=styled__default.div(_templateObject9(),opacityAnimation,function(a){return a.animationDuration||'.4s'}),ReactFtuxTooltip=/*#__PURE__*/function(a){function b(a){var c;return _classCallCheck(this,b),c=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this,a)),c.state={display:!1,last:!1,first:!1,animationDuration:.4,triggerEndFtux:function(){eventEmitter.trigger(events.FTUX_ACTION_END)},triggerIncreaseStep:function(){eventEmitter.trigger(events.FTUX_ACTION_INCREASE)},triggerDecreaseStep:function(){eventEmitter.trigger(events.FTUX_ACTION_DECREASE)},style:{padding:20,position:'fixed',borderRadius:5,display:'block'}},c}return _inherits(b,a),_createClass(b,[{key:'updateState',value:function(a){if(this.props.step===a.currentStep){var b=ReactDOM.findDOMNode(this.refs.tooltip);this.props.scrollTo&&window.scrollTo(0,b.offsetTop),this.props.scrollToTop&&window.scrollTo(0,0),this.props.pointerDirection&&'above'!==this.props.pointerDirection||(this.setState({offsetTop:b.nextSibling.offsetHeight+16+(this.props.offsetTop||0)}),this.props.offsetLeft&&this.setState({offsetLeft:this.props.offsetLeft})),'left'===this.props.pointerDirection&&(this.setState({offsetLeft:b.nextSibling.offsetWidth+16+(this.props.offsetLeft||0)}),this.props.offsetTop&&this.setState({offsetTop:this.props.offsetTop})),'below'===this.props.pointerDirection&&(this.setState({offsetBottom:16+(-this.props.offsetTop||0)}),this.props.offsetLeft&&this.setState({offsetLeft:this.props.offsetLeft})),'right'===this.props.pointerDirection&&(this.setState({offsetRight:16+(-this.props.offsetLeft||0)}),this.props.offsetTop&&this.setState({offsetTop:this.props.offsetTop})),a.ftuxProps&&this.props.step===a.ftuxProps.total-1&&this.setState({last:!0}),0===this.props.step&&this.setState({first:!0}),this.setState({display:!0})}else this.setState({display:!1});a.ftuxProps&&a.ftuxProps.tooltipSettings&&(a.ftuxProps.tooltipSettings.disableCloseButton&&this.setState({disableCloseButton:!0}),a.ftuxProps.tooltipSettings.animationDuration&&this.setState({animationDuration:a.ftuxProps.tooltipSettings.animationDuration}),a.ftuxProps.tooltipSettings.backgroundColor&&this.setState({backgroundColor:a.ftuxProps.tooltipSettings.backgroundColor}),a.ftuxProps.tooltipSettings.foregroundColor&&this.setState({foregroundColor:a.ftuxProps.tooltipSettings.foregroundColor}),a.ftuxProps.tooltipSettings.highlightColor&&this.setState({highlightColor:a.ftuxProps.tooltipSettings.highlightColor}),a.ftuxProps.tooltipSettings.tooltipWidth&&this.setState({tooltipWidth:a.ftuxProps.tooltipSettings.tooltipWidth}),a.ftuxProps.tooltipSettings.nextLabel&&this.setState({nextLabel:a.ftuxProps.tooltipSettings.nextLabel}),a.ftuxProps.tooltipSettings.prevLabel&&this.setState({prevLabel:a.ftuxProps.tooltipSettings.prevLabel}),a.ftuxProps.tooltipSettings.doneLabel&&this.setState({doneLabel:a.ftuxProps.tooltipSettings.doneLabel}))}},{key:'componentDidMount',value:function(){var a=this;eventEmitter.on(events.FTUX_UPDATER,function(b){a.updateState(b)}),eventEmitter.on(events.FTUX_ACTION_END,function(){a.updateState({currentStep:null})}),eventEmitter.trigger(events.FTUX_UPDATER,[ftuxStore])}},{key:'componentWillUnmount',value:function(){eventEmitter.off(events.FTUX_ACTION_END),eventEmitter.off(events.FTUX_UPDATER)}},{key:'render',value:function(){var a=this.state.last?React__default.createElement('div',null,React__default.createElement(StyledButton,{backgroundColor:this.state.backgroundColor,foregroundColor:this.state.foregroundColor,highlightColor:this.state.highlightColor,onClick:this.state.triggerDecreaseStep},this.state.prevLabel||'Prev'),React__default.createElement(StyledButton,{backgroundColor:this.state.backgroundColor,foregroundColor:this.state.foregroundColor,highlightColor:this.state.highlightColor,onClick:this.state.triggerEndFtux},this.state.doneLabel||'Done')):React__default.createElement('div',null,!this.state.first&&React__default.createElement(StyledButton,{backgroundColor:this.state.backgroundColor,foregroundColor:this.state.foregroundColor,highlightColor:this.state.highlightColor,onClick:this.state.triggerDecreaseStep},this.state.prevLabel||'Prev'),React__default.createElement(StyledButton,{backgroundColor:this.state.backgroundColor,foregroundColor:this.state.foregroundColor,highlightColor:this.state.highlightColor,onClick:this.state.triggerIncreaseStep},this.state.nextLabel||'Next'));var b=React__default.createElement('div',null,'above'===this.props.pointerDirection?React__default.createElement(PointerAbove,{backgroundColor:this.state.backgroundColor}):null,'below'===this.props.pointerDirection?React__default.createElement(PointerBelow,{backgroundColor:this.state.backgroundColor}):null,'left'===this.props.pointerDirection?React__default.createElement(PointerLeft,{backgroundColor:this.state.backgroundColor}):null,'right'===this.props.pointerDirection?React__default.createElement(PointerRight,{backgroundColor:this.state.backgroundColor}):null,this.props.pointerDirection?null:React__default.createElement(PointerAbove,{backgroundColor:this.state.backgroundColor}));return React__default.createElement('div',{ref:'tooltip',style:{transform:'scale(1)',zIndex:this.props.zIndex||999}},this.state.display&&React__default.createElement(TooltipBody,{animationDuration:this.state.animationDuration+'s',style:Object.assign({},this.state.style,{pointerEvents:this.state.display?'auto':'none',top:this.state.offsetTop||null,left:this.state.offsetLeft||null,bottom:this.state.offsetBottom||null,right:this.state.offsetRight||null,backgroundColor:this.state.backgroundColor||'black',color:this.state.foregroundColor||'white',width:this.state.tooltipWidth||400,minWidth:this.state.tooltipWidth||400})},b,React__default.createElement('div',{style:{display:'block',padding:10}},this.props.children),React__default.createElement(StyledAnchor,{style:{position:'absolute',top:0,right:6,fontSize:24,display:this.state.disableCloseButton?'none':null},highlightColor:this.state.highlightColor,onClick:this.state.triggerEndFtux},'\u2715'),React__default.createElement('div',{style:{float:'right',paddingTop:10}},a)))}}]),b}(React.Component);exports.ReactFtux=ReactFtux,exports.ReactFtuxTooltip=ReactFtuxTooltip;
